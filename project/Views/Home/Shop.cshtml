@model project.Models.ShopViewModel
<!DOCTYPE html>
<html lang="en">

<head>
	<title>Minishop - Free Bootstrap 4 Template by Colorlib</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
	<style>
		body {
			overflow-x: hidden;
		}

		#shop {
			background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), /* Semi-transparent black overlay */
			url('../assests/images/shop.jpg'); /* Your background image */
			background-size: cover; /* Ensures the image covers the entire section */
			background-position: center; /* Centers the background image */
			background-repeat: no-repeat; /* Prevents repetition of the background */
		}


		.form {
			position: relative;
			top: 140px;
		}

			.form .fa-search {
				position: absolute;
				top: 20px;
				left: 20px;
				color: #9ca3af;
			}

			.form span {
				position: absolute;
				right: 17px;
				top: 13px;
				padding: 2px;
				border-left: 1px solid #d1d5db;
			}

		.left-pan {
			padding-left: 7px;
		}

			.left-pan i {
				padding-left: 10px;
			}

		.form-input {
			height: 55px;
			text-indent: 33px;
			border-radius: 10px;
		}

			.form-input:focus {
				box-shadow: none;
				border: none;
			}
	</style>
</head>

<body class="goto-here">
	@Html.Partial("userheader")

	<div class="hero-wrap hero-bread" id="shop">
		<div class="container">
			<div class="row no-gutters slider-text align-items-center justify-content-center">
				<div class="col-md-9 ftco-animate text-center">
					<p class="breadcrumbs"><span class="mr-2"><a href="index.html" class=" text-white">Home</a></span> <span class=" text-white">Shop</span></p>
					<h1 class="mb-0 bread text-white">Shop</h1>
				</div>
			</div>
		</div>
		<div class="row height d-flex justify-content-center align-items-center">

			<div class="col-md-6">

				<div class="form position-relative">
					<i class="fa fa-search "></i>
					<input type="text" class="form-control form-input" placeholder="Search anything..." id="search" autocomplete="off">
					<span class="left-pan"><i class="fa fa-microphone"></i></span>
					<div class="list-group position-absolute" style="z-index:100;width:13rem" id="suggestion">
					</div>

				</div>

			</div>

		</div>
	</div>


	<div class="container2">




		<section class="ftco-section bg-light">
			<div class="container">

				<div class="row mt-5" id="searchresult">
				</div>

				<div class="row" id="sidebar">
					<div class="col-md-4 col-lg-2">
						<div class="sidebar">
							<div class="sidebar-box-2">
								<h2 class="heading">Categories</h2>
								<div class="fancy-collapse-panel">
									<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
										<div class="panel panel-default">
											<div class="panel-heading" role="tab" id="headingOne">
												<h4 class="panel-title">
													<a data-toggle="collapse" data-parent="#accordion" href="#collapseOne"
													   aria-expanded="true" aria-controls="collapseOne">
														Floor's
														<i class="ri-arrow-down-wide-fill" style="margin-left:20px;font-size:20px;margin-top:20px"></i>
													</a>
												</h4>
											</div>
											<div id="collapseOne" class="panel-collapse collapse" role="tabpanel"
												 aria-labelledby="headingOne">
												<div class="panel-body">
													<ul>
														<li><a href="@Url.Action("Shop")">All</a></li>
														@foreach (var floors in Model.Floors)
														{
															<li><a href="@Url.Action("Shop",new{floorid=floors.FloorID})">@floors.Description</a></li>


														}

													</ul>
												</div>
											</div>
										</div>
										<div class="panel panel-default">
											<div class="panel-heading" role="tab" id="headingTwo">
												<h4 class="panel-title">
													<a class="collapsed" data-toggle="collapse" data-parent="#accordion"
													   href="#collapseTwo" aria-expanded="false"
													   aria-controls="collapseTwo">
														category
														<i class="ri-arrow-down-wide-fill" style="margin-left:20px;font-size:20px;margin-top:20px"></i>

													</a>
												</h4>
											</div>
											<div id="collapseTwo" class="panel-collapse collapse" role="tabpanel"
												 aria-labelledby="headingTwo">
												<div class="panel-body">
													<ul>
														<li><a href="@Url.Action("Shop")">All</a></li>
														@foreach (var category in Model.Categories)
														{
															<li><a href="@Url.Action("Shop",new {categoryid=category.CategoryID})">@category.CategoryName</a></li>


														}
													</ul>
												</div>
											</div>
										</div>


									</div>
								</div>
							</div>

						</div>
					</div>
					<div class="col-md-8 col-lg-10 order-md-last">
						<div class="row">
							@foreach (var card in Model.Shops)
							{
								<div class="col-sm-12 col-md-12 col-lg-4 ftco-animate d-flex">
									<div class="product d-flex flex-column">
										<a asp-controller="Home" asp-action="ShopDetail" asp-route-id="@card.ShopID" class="img-prod">
											<img class="img-fluid" src="~/shopimages/@card.ImageURL"
												 alt="" style="height:300px" width="300px">
											<div class="overlay"></div>
										</a>
										<div class="text py-3 pb-4 px-3">
											<div class="d-flex">
												<div class="cat">
													<span>@card.Categories?.CategoryName</span>
												</div>

											</div>
											<h3><a href="#">@card.ShopName</a></h3>


										</div>
									</div>
								</div>

							}



						</div>
						<div class="row mt-5">
							<div class="col text-center">
								<div class="block-27">
									<ul>
										<li><a href="#">&lt;</a></li>
										<li class="active"><span>1</span></li>
										<li><a href="#">2</a></li>
										<li><a href="#">3</a></li>
										<li><a href="#">4</a></li>
										<li><a href="#">5</a></li>
										<li><a href="#">&gt;</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>


				</div>
			</div>
		</section>



		@Html.Partial("userfooter")



		<!-- loader -->
		<div id="ftco-loader" class="show fullscreen">
			<svg class="circular" width="48px" height="48px">
				<circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
				<circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
						stroke="#F96D00" />
			</svg>
		</div>




</body>

</html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>

	$(document).ready(function () {

		$('#search').on('keyup', function () {

			var mydata = $(this).val();

			var sidebar = $('#sidebar');

			var suggestion = $('#suggestion');

			var show = $('#searchresult');

			if (mydata.length > 0) {

				$.ajax({
					url: '/Home/Search',
					type: 'GET',
					data: { mydata: mydata },

					success: function (result) {
						show.empty
						suggestion.empty();
						sidebar.hide();
						$.each(result, function (index, item) {


							suggestion.append(`
											<a class="list-group-item" data-id= "${item.shopID}" data-name="${item.shopName}" data-image="${item.imageURL}">${item.shopName}</a>
									`);

							show.append(`<div class="col-md-4 p-5">
									<div class="card" style="width: 18rem;">
			  <img src="/shopimages/${item.imageURL}" class="card-img-top" alt="...">
			  <div class="card-body">
					<h5 class="card-title">${item.shopName}</h5>
				
			  </div>
				   </div>
			</div>`);
						})
					}

				});

				$(document).on('click', '.list-group-item', function () {
					var selectedName = $(this).data('name');
					var selectedImage = $(this).data('image');
					var id = $(this).data('id');
					debugger;
					$('#search').val(selectedName);

					suggestion.empty();
					show.empty();
					show.append(`<div class="col-md-4 p-5">
										<div class="card" style="width: 18rem;">
									<a asp-controller="Home" asp-action="ShopDetail" asp-route-id="${id}" class="img-prod">

								  <img src="/shopimages/${selectedImage}" class="card-img-top" alt="...">
								  </a>
				  <div class="card-body">
													<a asp-controller="Home" asp-action="ShopDetail" asp-route-id="${id}" class="img-prod">

							<h5 class="card-title">${selectedName}</h5></a>
					
				  </div>
					   </div>
				</div>`);
				})

			} else {
				sidebar.show();
				show.empty();
				suggestion.empty();
			}

		})


	});


</script>